import { type CojsonInternalTypes, type SessionID } from "cojson";
import type { DBClientInterfaceSync, SessionRow, SignatureAfterRow, StoredCoValueRow, StoredSessionRow, TransactionRow } from "../types.js";
import type { SQLiteDatabaseDriver } from "./types.js";
type RawCoID = CojsonInternalTypes.RawCoID;
type Signature = CojsonInternalTypes.Signature;
type Transaction = CojsonInternalTypes.Transaction;
export type RawCoValueRow = {
    id: CojsonInternalTypes.RawCoID;
    header: string;
};
export type RawTransactionRow = {
    ses: number;
    idx: number;
    tx: string;
};
export declare function getErrorMessage(error: unknown): string;
export declare class SQLiteClient implements DBClientInterfaceSync {
    private readonly db;
    constructor(db: SQLiteDatabaseDriver);
    getCoValue(coValueId: RawCoID): StoredCoValueRow | undefined;
    getCoValueSessions(coValueRowId: number): StoredSessionRow[];
    getSingleCoValueSession(coValueRowId: number, sessionID: SessionID): StoredSessionRow | undefined;
    getNewTransactionInSession(sessionRowId: number, fromIdx: number, toIdx: number): TransactionRow[];
    getSignatures(sessionRowId: number, firstNewTxIdx: number): SignatureAfterRow[];
    addCoValue(msg: CojsonInternalTypes.NewContentMessage): number;
    addSessionUpdate({ sessionUpdate, }: {
        sessionUpdate: SessionRow;
    }): number;
    addTransaction(sessionRowID: number, nextIdx: number, newTransaction: Transaction): void;
    addSignatureAfter({ sessionRowID, idx, signature, }: {
        sessionRowID: number;
        idx: number;
        signature: Signature;
    }): void;
    transaction(operationsCallback: () => unknown): undefined;
}
export {};
//# sourceMappingURL=client.d.ts.map