import { type CojsonInternalTypes, type SessionID } from "cojson";
import type { DBClientInterfaceAsync, SessionRow, SignatureAfterRow, StoredCoValueRow, StoredSessionRow, TransactionRow } from "../types.js";
import type { SQLiteDatabaseDriverAsync } from "./types.js";
type RawCoID = CojsonInternalTypes.RawCoID;
type Signature = CojsonInternalTypes.Signature;
type Transaction = CojsonInternalTypes.Transaction;
export type RawCoValueRow = {
    id: CojsonInternalTypes.RawCoID;
    header: string;
};
export type RawTransactionRow = {
    ses: number;
    idx: number;
    tx: string;
};
export declare function getErrorMessage(error: unknown): string;
export declare class SQLiteClientAsync implements DBClientInterfaceAsync {
    private readonly db;
    constructor(db: SQLiteDatabaseDriverAsync);
    getCoValue(coValueId: RawCoID): Promise<StoredCoValueRow | undefined>;
    getCoValueSessions(coValueRowId: number): Promise<StoredSessionRow[]>;
    getSingleCoValueSession(coValueRowId: number, sessionID: SessionID): Promise<StoredSessionRow | undefined>;
    getNewTransactionInSession(sessionRowId: number, fromIdx: number, toIdx: number): Promise<TransactionRow[]>;
    getSignatures(sessionRowId: number, firstNewTxIdx: number): Promise<SignatureAfterRow[]>;
    addCoValue(msg: CojsonInternalTypes.NewContentMessage): Promise<number>;
    addSessionUpdate({ sessionUpdate, }: {
        sessionUpdate: SessionRow;
    }): Promise<number>;
    addTransaction(sessionRowID: number, nextIdx: number, newTransaction: Transaction): void;
    addSignatureAfter({ sessionRowID, idx, signature, }: {
        sessionRowID: number;
        idx: number;
        signature: Signature;
    }): Promise<void>;
    transaction(operationsCallback: () => unknown): Promise<unknown>;
}
export {};
//# sourceMappingURL=client.d.ts.map